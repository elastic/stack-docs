[[multi-region-two-datacenter-architecture]]
== Self-managed hot-frozen multi-region architecture for time series data
++++
<titleabbrev>Architecture: Self-managed - two datacenter</titleabbrev>
++++

This article defines a scalable and highly available architecture for Elasticsearch using two datacenters in separate geographical regions. Having an Elasticsearch cluster in another separate geographical region helps with network latency. Requests will be better served to a cluster that is geographically closer to you.

TIP: This architecture includes all the essential components of the Elastic Stack. It's designed to ensure your deployment has a stable foundation, based on expert recommendations, but is not intended for sizing workloads.

The most important foundational step to any architecture is designing your deployment to be responsive to production workloads. For more information on planning for production, see https://www.elastic.co/guide/en/elasticsearch/reference/current/scalability.html[Get ready for production].

[discrete]
[[multi-region-use-case]]
=== Use case

This architecture is intended for organizations that need to do the following: 

* Monitor the performance and health of their applications in real time
* Provide insights and alerts to ensure optimal performance and quick issue resolution for applications

[discrete]
[[multi-region-architecture]]
=== Architecture

image::images/multi-region-two-datacenter.png["A multi-region time-series architecture across two datacenters"]

[discrete]
[[multi-region-configuration]]
=== Example configuration

The following is a sample configuration with the following specifications:

* An ingest rate of 1TB/day
* 1 day in the hot tier
* 89 days in the frozen tier
* A total of 90 days of searchable data

* Hot tier: 120G RAM (2 60G RAM node x 3 pods x 2 availability zones)
* Frozen tier: 120G RAM (1 60G RAM node x 3 pods x 2 availability zones)
* Machine learning: 128G RAM (1 64G node x 3 pods x 2 availability zones)
* Master nodes: 24G RAM (8G node x 3 pods x 2 availability zones) 
* Kibana: 16G RAM (16G node x 3 pods x 2 availability zones)

[discrete]
[[multi-region-considerations]]
=== Important considerations

The following are important considerations for this architecture:

* Hot nodes contain both primary and replica shards. https://www.elastic.co/guide/en/elasticsearch/reference/8.15/modules-cluster.html#shard-allocation-awareness[Shard allocation awareness] should be configured to ensure primary and replica shards do not end up in the same pod.
* Machine learning nodes are optional, but highly recommended for large-scale time series use cases. The amount of data can quickly become overwhelming and difficult to analyze. Applying techniques like machine learning-based anomaly detection can help manage this data effectively.

[discrete]
[[multi-region-limitations]]
=== Limitations of this architecture
* No region resilience

[discrete]
[[multi-region-resources]]
=== Resources and references

